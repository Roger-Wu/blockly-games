{namespace Shop.soy}


/**
 * Web page structure.
 */
{template .start}
  {call .messages /}
  {call .header /}
  <div id="drink-shop-game-container">
    <div id="drink-shop-shop-container">
      {call .svgShop /}
      <div id="show-code-editor-button" class="show-hide-code-editor-button">
        <div>&#x25c0;</div>
        <div>編輯</div>
        <div>程式</div>
      </div>
    </div>
    {call .codeEditor /}
  </div>
  {call BlocklyGames.soy.dialog /}
  {call BlocklyGames.soy.doneDialog /}
  {call BlocklyGames.soy.abortDialog /}
  {call BlocklyGames.soy.storageDialog /}
{/template}

/**
 * Translated messages for use in JavaScript.
 */
{template .messages}
  {call BlocklyGames.soy.messages /}
  <div style="display: none">
    <span id="DrinkShop_getNewCup">{msg meaning="DrinkShop_getNewCup" desc="block text - robot gets a cup"}get a new cup{/msg}</span>
    <span id="DrinkShop_fillCupWith">{msg meaning="DrinkShop_fillCupWith" desc="block text - robot fills the cup with drink"}fill the cup with{/msg}</span>
    <span id="DrinkShop_coverCup">{msg meaning="DrinkShop_coverCup" desc="block test - robot covers the cup"}cover the cup{/msg}</span>
    <span id="DrinkShop_serve">{msg meaning="DrinkShop_serve" desc="block test - robot serves what it is holding"}serve the cup{/msg}</span>

    <span id="DrinkShop_blackTea">{msg meaning="DrinkShop_blackTea" desc="block test - black tea"}black tea{/msg}</span>
    <span id="DrinkShop_greenTea">{msg meaning="DrinkShop_greenTea" desc="block test - green tea"}green tea{/msg}</span>

    <span id="DrinkShop_msg_noServedDrink">{msg meaning="DrinkShop_msg_noServedDrink" desc="game message"}The customer didn't get their tea.{/msg} &#x1F641;</span>
    <span id="DrinkShop_msg_servedMultiple">{msg meaning="DrinkShop_msg_servedMultiple" desc="game message"}The customer received more than 1 cup of drink.{/msg} &#x1F641;</span>
    <span id="DrinkShop_msg_cupEmpty">{msg meaning="DrinkShop_msg_cupEmpty" desc="game message"}The cup is empty.{/msg} &#x1F641;</span>
    <span id="DrinkShop_msg_notBlackTea">{msg meaning="DrinkShop_msg_notBlackTea" desc="game message"}It's not black tea.{/msg} &#x1F641;</span>
    <span id="DrinkShop_msg_notGreenTea">{msg meaning="DrinkShop_msg_notGreenTea" desc="game message"}It's not green tea.{/msg} &#x1F641;</span>
    <span id="DrinkShop_msg_cupNotCovered">{msg meaning="DrinkShop_msg_cupNotCovered" desc="game message"}The cup is not covered.{/msg} &#x1F641;</span>

    <span id="DrinkShop_msg_errorIn">{msg meaning="DrinkShop_msg_errorIn" desc="game message"}An error occured in '%1'{/msg}</span>
    <span id="DrinkShop_msg_reason">{msg meaning="DrinkShop_msg_reason" desc="game message"}Reason{/msg}</span>
    <span id="DrinkShop_msg_noCup">{msg meaning="DrinkShop_msg_noCup" desc="game message"}There is no cup in my hand.{/msg} &#x1F641;</span>
    <span id="DrinkShop_msg_cupCovered">{msg meaning="DrinkShop_msg_cupCovered" desc="game message"}The cup has been covered.{/msg} &#x1F641;</span>
  </div>
{/template}

/**
 * header
 */
{template .header}
  <div class="header" style="display: none;">
    <table width="100%">
      <tr>
        <td>
          <h1>
            {call BlocklyGames.soy.titleSpan}
              {param appName}
                {msg meaning="Games.shop" desc="Drink Shop"}Drink Shop{/msg}
              {/param}
            {/call}
            {call BlocklyGames.soy.levelLinks}
              {param level: $ij.level /}
              {param maxLevel: $ij.maxLevel /}
              {param lang: $ij.lang /}
              {param suffix}{/param}
            {/call}
          </h1>
        </td>
        <td class="farSide">
          <select id="languageMenu"></select>
          &nbsp;
          <button id="linkButton" title="{msg meaning="Games.linkTooltip" desc="IBID"}Save and link to blocks.{/msg}">
            <img src="common/1x1.gif" class="link icon21">
          </button>
        </td>
      </tr>
    </table>
  </div>
{/template}

/**
 * shop game ui
 */
{template .svgShop}
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgShop" width="100%" height="100%" viewBox="0 0 1280 720">
    <defs>
      <filter id="glow" x="-30%" y="-30%" width="160%" height="160%">
        <feGaussianBlur stdDeviation="10 10" result="glow" />
        <feMerge>
          <feMergeNode in="glow" />
          <feMergeNode in="glow" />
          <feMergeNode in="glow" />
        </feMerge>
      </filter>
    </defs>
    <g id="drink-shop-walls">
      <rect fill="#d0d0d0" width="100%" height="100%"></rect>
      <rect fill="#e0e0e0" width="160" height="100%"></rect>
      <rect fill="#e0e0e0" x="1120" width="160" height="100%"></rect>
      <polygon fill="#d8d8d8" points="0,0 1280,0 1120,80 160,80"></polygon>
    </g>
    <svg id="drink-shop-material-list" class="clickable" x="220" y="160" width="90" height="120" viewBox="0 0 150 200">
      <rect fill="#f0f0f0" width="100%" height="100%">
      </rect>
      <circle cx="75" cy="15" r="5" fill="brown"></circle>
      <line x1="30" y1="30" x2="120" y2="30" style="stroke:#e0e0e0; stroke-width:5"></line>
      <line x1="30" y1="50" x2="120" y2="50" style="stroke:#e0e0e0; stroke-width:5"></line>
      <line x1="30" y1="70" x2="120" y2="70" style="stroke:#e0e0e0; stroke-width:5"></line>
      <line x1="30" y1="90" x2="120" y2="90" style="stroke:#e0e0e0; stroke-width:5"></line>
      <line x1="30" y1="110" x2="120" y2="110" style="stroke:#e0e0e0; stroke-width:5"></line>
      <line x1="30" y1="130" x2="120" y2="130" style="stroke:#e0e0e0; stroke-width:5"></line>
      <line x1="30" y1="150" x2="120" y2="150" style="stroke:#e0e0e0; stroke-width:5"></line>
      <line x1="30" y1="170" x2="120" y2="170" style="stroke:#e0e0e0; stroke-width:5"></line>

      <text id="drink-shop-material-list-text" class="hidden-text svg-text-normal" x="50%" y="50%" text-anchor="middle" alignment-baseline="central" font-size="40">材料</text>
    </svg>
    <svg id="drink-shop-robot" class="clickable" x="460" y="220" width="360" height="360" viewBox="0 0 360 360">
      <image width="360" height="360" xlink:href="/shop/public/robot.png" />
      <g id="drink-shop-robot-text" class="hidden-text" text-anchor="middle" alignment-baseline="central" font-family="Arial" font-size="40">
        <text style="filter: url(#glow); fill: white" x="50%" y="50%">編輯程式</text>
        <text x="50%" y="50%" class="svg-text-normal">編輯程式</text>
      </g>
    </svg>
    <g id="drink-shop-front-desk">
      <rect fill="#80DEEA" y="480" width="100%" height="240"></rect>
      <rect fill="white" y="480" width="100%" height="60"></rect>
      <polygon fill="#f4f4f4" points="0,480 1280,480 1240,465 40,465"></polygon>
    </g>
    <svg id="drink-shop-price-list" class="clickable" x="1000" y="275" width="150" height="200" viewBox="0 0 150 200">
      <rect fill="#f8f8f8" width="100%" height="100%">
      </rect>
      <line x1="30" y1="30" x2="120" y2="30" style="stroke:#f0f0f0; stroke-width:5"></line>
      <line x1="30" y1="50" x2="120" y2="50" style="stroke:#f0f0f0; stroke-width:5"></line>
      <line x1="30" y1="70" x2="120" y2="70" style="stroke:#f0f0f0; stroke-width:5"></line>
      <line x1="30" y1="90" x2="120" y2="90" style="stroke:#f0f0f0; stroke-width:5"></line>
      <line x1="30" y1="110" x2="120" y2="110" style="stroke:#f0f0f0; stroke-width:5"></line>
      <line x1="30" y1="130" x2="120" y2="130" style="stroke:#f0f0f0; stroke-width:5"></line>
      <line x1="30" y1="150" x2="120" y2="150" style="stroke:#f0f0f0; stroke-width:5"></line>
      <line x1="30" y1="170" x2="120" y2="170" style="stroke:#f0f0f0; stroke-width:5"></line>

      <line x1="140" y1="-20" x2="-20" y2="140" style="stroke: white; stroke-width:30"></line>
      <line x1="20" y1="220" x2="220" y2="20" style="stroke: white; stroke-width:20"></line>
      <rect fill="rgba(0, 0, 0, 0)" width="100%" height="100%" stroke="#e0e0e0" stroke-width="15" stroke-alignment="inner" />

      <text id="drink-shop-price-list-text" class="hidden-text svg-text-normal" x="50%" y="50%" text-anchor="middle" alignment-baseline="central"
      font-size="30">菜單</text>
    </svg>
  </svg>
{/template}


/**
 * code editor modal
 */
{template .codeEditor}
  <div id="drink-shop-code-editor-container">
    // left zone: click to hide code-editor
    <div id="hide-code-editor-zone">
      <div id="hide-code-editor-button" class="show-hide-code-editor-button">
        <div>&#x25b6;</div>
        <div>隱藏</div>
      </div>
    </div>

    <div id="drink-shop-code-editor">
      // left part
      <div id="drink-shop-code-editor-left">
        <div id="drink-shop-level-desc-container">
          <div class="drink-shop-level-desc-title">關卡敘述</div>
          <div id="drink-shop-level-desc" class="drink-shop-level-desc-text"></div>
          <div class="drink-shop-level-desc-title">關卡目標</div>
          <div id="drink-shop-level-desc-goal" class="drink-shop-level-desc-text"></div>
        </div>
        {call .svgWorkspace /}
        <div id="capacityBubble">
          <div id="capacity"></div>
        </div>
      </div>

      // code editor
      {call .toolbox /}
      <div id="blockly"></div>

      // run button
      <div id="runButtonWrapper">
        <button id="runButton" class="primary" title="{msg meaning="DrinkShop_runTooltip" desc="tooltip - Pressing this button runs the computer program the user has written to move the robot."}Makes the robot do what the blocks say.{/msg}">
          <span>&#9658; {msg meaning="Games.runProgram" desc="IBID"}Run Program{/msg}</span>
        </button>
        <button id="resetButton" class="primary" style="display: none" title="{msg meaning="DrinkShop_resetTooltip" desc="tooltip - Pressing this button to restart the game."}Undo what the robot has done.{/msg}">
          <span>&#8634; {msg meaning="Games.resetProgram" desc="IBID"}Reset{/msg}</span>
        </button>
      </div>
    </div>
  </div>
{/template}

/**
 * Shop workspace. Game UI
 */
{template .svgWorkspace}
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgWorkspace" width="400px" height="400px" viewBox="0 0 100 100">
    <rect width="100" height="100" fill="#eee" stroke-width="0.5" stroke="#ccc"></rect>
    <g id="workspace-main"></g>
    <g id="scoring-board">
      // time
      <svg id="scoring-board-time" x="2" y="2">
        <svg id="scoring-board-clock" viewBox="0 0 10 10" width="8"  height="8">
          <circle cx="5" cy="5" r="4.5" class="svg-clock-circle" />
          <line x1="5" y1="5" x2="5" y2="2" class="svg-clock-line" />
          <line x1="5" y1="5" x2="7" y2="5" class="svg-clock-line" />
        </svg>
        <text x="10" y="4.5" id="scoring-board-time-text" class="svg-scoring-board-text">0</text>
      </svg>
      // money
      <svg id="scoring-board-money" x="2" y="12">
        <svg id="scoring-board-clock" viewBox="0 0 10 10" width="8"  height="8">
          <circle cx="5" cy="5" r="4.5" style="stroke: #FFC107; stroke-width:1; fill: #FFECB3;" />
          <text x="5" y="5.5" font-weight="bold" alignment-baseline="middle" text-anchor="middle" font-size="8" style="fill: #FFC107;">$</text>
        </svg>
        <text x="10" y="4.5" id="scoring-board-money-text" class="svg-scoring-board-text">0</text>
      </svg>
      <svg id="scoring-board-material-drink" x="2" y="22">
        <svg width="8"  height="8" viewBox="0 0 512 512">
          <path style="fill:#84DBFF;" d="M438.4,329.6C438.4,430.933,356.267,512,256,512S73.6,430.933,73.6,329.6S256,0,256,0
            S438.4,229.333,438.4,329.6z"/>
          <path style="fill:rgba(255,255,255,0.5);" d="M256,464c-73.6,0-134.4-59.733-134.4-134.4c0-8.533,7.467-16,16-16s16,7.467,16,16
            c0,56.533,45.867,102.4,102.4,102.4c8.533,0,16,7.467,16,16S264.533,464,256,464z"/>
        </svg>
      </svg>

      <g id="svg-scoring-board-top-left"></g>
      <g id="svg-scoring-board-top-right"></g>
    </g>
  </svg>
{/template}

/**
 * Toolboxes for each level.
 */
{template .toolbox}
  <xml id="toolbox" style="display: none;">
    // <category id="toolbox-others" colour="330" name="Others">
    <block type="DrinkShop_getNewCup"></block>
    <block type="DrinkShop_fillCupWith"></block>
    <block type="DrinkShop_coverCup"></block>
    <block type="DrinkShop_serve"></block>
    // </category>

    // <category id="catLogic" colour="210" name="Logic">
    //   <block type="controls_if"></block>
    //   <block type="logic_compare"></block>
    //   <block type="logic_operation"></block>
    //   <block type="logic_negate"></block>
    //   <block type="logic_boolean"></block>
    //   <block type="logic_null"></block>
    //   <block type="logic_ternary"></block>
    // </category>
    // <category id="catLoops" colour="120" name="Loops">
    //   <block type="controls_repeat_ext">
    //     <value name="TIMES">
    //       <shadow type="math_number">
    //         <field name="NUM">10</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="controls_whileUntil"></block>
    //   <block type="controls_for">
    //     <value name="FROM">
    //       <shadow type="math_number">
    //         <field name="NUM">1</field>
    //       </shadow>
    //     </value>
    //     <value name="TO">
    //       <shadow type="math_number">
    //         <field name="NUM">10</field>
    //       </shadow>
    //     </value>
    //     <value name="BY">
    //       <shadow type="math_number">
    //         <field name="NUM">1</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="controls_forEach"></block>
    //   <block type="controls_flow_statements"></block>
    // </category>
    // <category id="catMath" colour="230" name="Math">
    //   <block type="math_number"></block>
    //   <block type="math_arithmetic">
    //     <value name="A">
    //       <shadow type="math_number">
    //         <field name="NUM">1</field>
    //       </shadow>
    //     </value>
    //     <value name="B">
    //       <shadow type="math_number">
    //         <field name="NUM">1</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="math_single">
    //     <value name="NUM">
    //       <shadow type="math_number">
    //         <field name="NUM">9</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="math_trig">
    //     <value name="NUM">
    //       <shadow type="math_number">
    //         <field name="NUM">45</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="math_constant"></block>
    //   <block type="math_number_property">
    //     <value name="NUMBER_TO_CHECK">
    //       <shadow type="math_number">
    //         <field name="NUM">0</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="math_change">
    //     <value name="DELTA">
    //       <shadow type="math_number">
    //         <field name="NUM">1</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="math_round">
    //     <value name="NUM">
    //       <shadow type="math_number">
    //         <field name="NUM">3.1</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="math_on_list"></block>
    //   <block type="math_modulo">
    //     <value name="DIVIDEND">
    //       <shadow type="math_number">
    //         <field name="NUM">64</field>
    //       </shadow>
    //     </value>
    //     <value name="DIVISOR">
    //       <shadow type="math_number">
    //         <field name="NUM">10</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="math_constrain">
    //     <value name="VALUE">
    //       <shadow type="math_number">
    //         <field name="NUM">50</field>
    //       </shadow>
    //     </value>
    //     <value name="LOW">
    //       <shadow type="math_number">
    //         <field name="NUM">1</field>
    //       </shadow>
    //     </value>
    //     <value name="HIGH">
    //       <shadow type="math_number">
    //         <field name="NUM">100</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="math_random_int">
    //     <value name="FROM">
    //       <shadow type="math_number">
    //         <field name="NUM">1</field>
    //       </shadow>
    //     </value>
    //     <value name="TO">
    //       <shadow type="math_number">
    //         <field name="NUM">100</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="math_random_float"></block>
    // </category>
    // <category id="catText" colour="160" name="Text">
    //   <block type="text"></block>
    //   <block type="text_join"></block>
    //   <block type="text_append">
    //     <value name="TEXT">
    //       <shadow type="text"></shadow>
    //     </value>
    //   </block>
    //   <block type="text_length">
    //     <value name="VALUE">
    //       <shadow type="text">
    //         <field name="TEXT">abc</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="text_isEmpty">
    //     <value name="VALUE">
    //       <shadow type="text">
    //         <field name="TEXT"></field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="text_indexOf">
    //     <value name="VALUE">
    //       <block type="variables_get">
    //         <field name="VAR">text</field>
    //       </block>
    //     </value>
    //     <value name="FIND">
    //       <shadow type="text">
    //         <field name="TEXT">abc</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="text_charAt">
    //     <value name="VALUE">
    //       <block type="variables_get">
    //         <field name="VAR">text</field>
    //       </block>
    //     </value>
    //   </block>
    //   <block type="text_getSubstring">
    //     <value name="STRING">
    //       <block type="variables_get">
    //         <field name="VAR">text</field>
    //       </block>
    //     </value>
    //   </block>
    //   <block type="text_changeCase">
    //     <value name="TEXT">
    //       <shadow type="text">
    //         <field name="TEXT">abc</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="text_trim">
    //     <value name="TEXT">
    //       <shadow type="text">
    //         <field name="TEXT">abc</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="text_print">
    //     <value name="TEXT">
    //       <shadow type="text">
    //         <field name="TEXT">abc</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="text_prompt_ext">
    //     <value name="TEXT">
    //       <shadow type="text">
    //         <field name="TEXT">abc</field>
    //       </shadow>
    //     </value>
    //   </block>
    // </category>
    // <category id="catLists" colour="260" name="Lists">
    //   <block type="lists_create_with">
    //     <mutation items="0"></mutation>
    //   </block>
    //   <block type="lists_create_with"></block>
    //   <block type="lists_repeat">
    //     <value name="NUM">
    //       <shadow type="math_number">
    //         <field name="NUM">5</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="lists_length"></block>
    //   <block type="lists_isEmpty"></block>
    //   <block type="lists_indexOf">
    //     <value name="VALUE">
    //       <block type="variables_get">
    //         <field name="VAR">list</field>
    //       </block>
    //     </value>
    //   </block>
    //   <block type="lists_getIndex">
    //     <value name="VALUE">
    //       <block type="variables_get">
    //         <field name="VAR">list</field>
    //       </block>
    //     </value>
    //   </block>
    //   <block type="lists_setIndex">
    //     <value name="LIST">
    //       <block type="variables_get">
    //         <field name="VAR">list</field>
    //       </block>
    //     </value>
    //   </block>
    //   <block type="lists_getSublist">
    //     <value name="LIST">
    //       <block type="variables_get">
    //         <field name="VAR">list</field>
    //       </block>
    //     </value>
    //   </block>
    //   <block type="lists_split">
    //     <value name="DELIM">
    //       <shadow type="text">
    //         <field name="TEXT">,</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="lists_sort"></block>
    // </category>
    // <category id="catColour" colour="20" name="Color">
    //   <block type="colour_picker"></block>
    //   <block type="colour_random"></block>
    //   <block type="colour_rgb">
    //     <value name="RED">
    //       <shadow type="math_number">
    //         <field name="NUM">100</field>
    //       </shadow>
    //     </value>
    //     <value name="GREEN">
    //       <shadow type="math_number">
    //         <field name="NUM">50</field>
    //       </shadow>
    //     </value>
    //     <value name="BLUE">
    //       <shadow type="math_number">
    //         <field name="NUM">0</field>
    //       </shadow>
    //     </value>
    //   </block>
    //   <block type="colour_blend">
    //     <value name="COLOUR1">
    //       <shadow type="colour_picker">
    //         <field name="COLOUR">#ff0000</field>
    //       </shadow>
    //     </value>
    //     <value name="COLOUR2">
    //       <shadow type="colour_picker">
    //         <field name="COLOUR">#3333ff</field>
    //       </shadow>
    //     </value>
    //     <value name="RATIO">
    //       <shadow type="math_number">
    //         <field name="NUM">0.5</field>
    //       </shadow>
    //     </value>
    //   </block>
    // </category>
    // <sep></sep>
    // <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>
    // <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>
  </xml>
{/template}